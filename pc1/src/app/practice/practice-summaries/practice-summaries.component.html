<div class="container border border-primary">
	<div class="container" style="text-align:center">
		<button (click)="toggleForm()" class="btn btn-primary">Add New Summary</button>
		<div>
			<app-form 
				*ngIf="show_form"
				(outSummary)="createSummary($event)"
			></app-form>
		</div>
	</div>
	<div class="container">
		<div *ngIf="show_bar">
			<h6 style="text-align:center">Loading summaries...</h6> 
			<mat-progress-bar
				class="example-margin"
				color="primary"
				mode="buffer"
				>
			</mat-progress-bar>
		</div>
		<h6 *ngIf="!show_bar" style="text-align: center">Select the date to view/edit daily summary details</h6>
		<div class="container">
			<mat-form-field>
				<mat-label>Year</mat-label>
				<mat-select
					[(value)]="selected_year"
					(selectionChange)="selectNewYear($event)"
				>
					<mat-option 
						*ngFor="let year of year_options"
						[value]="year"
						>{{year}}
					</mat-option>
					</mat-select>
			</mat-form-field>
			<mat-form-field>
				<mat-label>Month</mat-label>
				<mat-select
					[(value)]="selected_month"
					(selectionChange)="selectNewMonth($event)"
				>
					<mat-option
						*ngFor="let month of month_options"
						[value]="month"
						>{{month}}
					</mat-option>
				</mat-select>
			</mat-form-field>
		</div>
		<ul class="list-group">
			<li
				*ngFor="let summary of daily_summaries" 
				class="list-group-item">
				<mat-expansion-panel>
					<mat-expansion-panel-header>
						<mat-panel-title>{{summary.date}}</mat-panel-title>
						<mat-panel-description>
							<p class="text-info">Select to edit</p>
						</mat-panel-description>
					</mat-expansion-panel-header>
						<app-form
							[summaryId] = "summary.id"
							[practice] = "summary.practice"
							[date]="summary.date" 
							[visits]="summary.visits"
							[workdays]="summary.workdays"
							[noshows]="summary.noshows"
							(outSummary)="updateSummary($event, summary.id)">
						</app-form>
				</mat-expansion-panel>
			</li>
		</ul>
	</div>
</div>
